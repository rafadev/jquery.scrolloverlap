(function(b){var d,a;d=function(e){var f={shrinkStart:0.5,shrinkHeight:150};return this.each(function(){var g=b(this),h=g.data("scrolloverlap");if(!h){h={};h.options=b.extend(f,e);h.$children=g.children();h.heights={};h.sumPrevious={};g.data("scrolloverlap",h);h.$children.each(function(i){h.heights[i]=b(this).height();if(i==0){h.sumPrevious[0]=0}else{h.sumPrevious[i]=sumPrevious(g,i)}})}a(g);b(window).scroll(function(){a(g)}).resize(function(){a(g)})})};sumPrevious=function(g,f){var i=g.data("scrolloverlap"),e=i.heights[f],h=0;for(c=0;c<f;c++){h+=i.heights[c]-i.options.shrinkHeight}return h};a=function(f){var h=f.data("scrolloverlap"),e=b(window),g=e.height(),i=e.scrollTop();h.$children.each(function(k){var j=0;if((i+g*h.options.shrinkStart>h.sumPrevious[k]+h.heights[k])&&(i+g*h.options.shrinkStart-h.options.shrinkHeight<h.sumPrevious[k]+h.heights[k])){j=h.heights[k]-(i+g*h.options.shrinkStart-h.sumPrevious[k]-h.heights[k])}else{if(i>h.sumPrevious[k]+h.heights[k]-g*h.options.shrinkStart){j=h.heights[k]-h.options.shrinkHeight}else{j=h.heights[k]}}b(this).height(j)})};publicMethods={init:d};b.fn.scrolloverlap=function(e){if(publicMethods[e]){return publicMethods[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||!e){return publicMethods.init.apply(this,arguments)}else{b.error("Method "+e+" does not exist on jQuery.scrolloverlap")}}}})(jQuery);